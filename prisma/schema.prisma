generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

enum Status {
    INITIAL
    BETTING
    FREEZE
    FINAL
}

model Game {
    id              String  @id

    finalBlock      Int     @map("final_block")
    firstBlock      Int     @map("first_block")
    freezeDuration  Int     @map("freeze_duration")
    initialPool     BigInt  @map("initial_pool")
    minBet          BigInt  @map("min_bet")
    roundLength     Int     @map("round_length")
    ticketPrice     BigInt  @map("ticket_price")

    currentBlock    Int     @map("current_block")
    nextFreeze      Int     @map("next_freeze")
    nextMassacre    Int     @map("next_massacre")
    currentPool     BigInt  @map("current_pool")
    status          Status

    participants  Participants[]  @relation
}

model Participant {
    gameId         String  @map("game_id")
    participantId  String  @map("participant_id")
    amount         BigInt

    game  Game  @relation(fields: [gameId], references: [id])

    @@id([gameId, participantId])
}
